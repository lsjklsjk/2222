<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
      <script>
      function submitForm(event) {
      event.preventDefault();
      var form = document.getElementById('signupForm');
      var signatureImage = canvas.toDataURL(); // ì„œëª…ì„ ì´ë¯¸ì§€ ë°ì´í„° URLë¡œ ë³€í™˜
      var formData = {
        name: form.name.value,
        tel: form.tel.value,
        email: form.email.value,
        member: form.member.value,
        yes: form.yes.value,
        signature: signatureImage
      };
        google.script.run.processForm(formData);
        google.script.run.sendEmail(formData); // ì´ë©”ì¼ì„ ë³´ë‚´ëŠ” í•¨ìˆ˜ í˜¸ì¶œ
        setTimeout(() => form.reset(), 3000); // 3ì´ˆë’¤ rese
        setTimeout(() => clearSignature(), 3000); // 3ì´ˆë’¤ clear sing
        alert('ğŸ‘Œêµìœ¡ì°¸ê°€ ê´€ë ¨ ê°œì¸ì •ë³´ ì œê³µ ë° í™œìš© ë™ì˜ì„œê°€ ì œì¶œë˜ì—ˆìŠµë‹ˆë‹¤. \n ğŸ™â€â™€ï¸ê°ì‚¬í•©ë‹ˆë‹¤');
}
</script>
      <style>
        body {
          margin: 10px;
        }
        #signatureCanvas {
          box-shadow:0px 3px 6px grey;
          border-radius: 5px;
          border: 1px solid black;
          background-color: beige;
        }
        #docu, #close {
          display: none;
        }
        </style>
  </head>
  <body>
    <h4>| ê°œì¸ì •ë³´ ì œê³µ.í™œìš©ë™ì˜ ì‹ ì²­ì„œ |</h4>
    <br>
    <form id="signupForm"  onsubmit="submitForm(event)">
      <label class="form-label" for="name">ğŸ¤·â€â™‚ï¸ì´ë¦„:</label>
      <input class="form-control" type="text" id="names" name="name" required><br>
      <label for="tel">â˜ï¸ì—°ë½ì²˜(#í˜•ì‹: 010-0000-0000)
      </label>
      <input class="form-control" type="text" id="tel" pattern="010-[0-9]{4}-[0-9]{4}\s*" value="010-" name="tel" required><br>
      <label for="email">ğŸ“§ì´ë©”ì¼
      </label>
      <input class="form-control" type="email" id="email" name="email" required><br>
      <label class="form-label" for="member">âœ¨ì¡°í•©ëª…:</label>
      <input class="form-control" type="text" id="members" name="member" required><br>
            <h5>â­ê°œì¸ì •ë³´ ì œê³µ.í™œìš© ë™ì˜ </h5>
      <small>ğŸ¤·â€â™€ï¸ì•„ë˜ì— ë™ì˜ë¬¸êµ¬ "â–¡" âœ”(ì²´í¬) ë° ìí•„ì„œëª… ë°”ëë‹ˆë‹¤.</small> 
      <br> <br>
      <input type="checkbox" name="yes" value="ë™ì˜í•©ë‹ˆë‹¤" required>
      <label for="yes1">ì‹ í˜‘ êµìœ¡ì°¸ê°€ì™€ ê´€ë ¨í•˜ì—¬ ì´ë¦„, ì—°ë½ì²˜ ë“±ì˜ ê°œì¸ì •ë³´ ì œê³µ ë° í™œìš©ì— ë™ì˜ í•©ë‹ˆë‹¤.(ìì„¸í•œ ë‚´ìš©ì€ ì•„ë˜ [ê°œì¸ì •ë³´ì œê³µë‚´ìš©]ì„ ì°¸ì¡°í•´ ì£¼ì„¸ìš”</label>
      <br>
      <div class="mb-3">  
      <!-- <label class="form-label" for="signature">ğŸ“ìí•„ì„œëª…:</label> -->
      <canvas id="signatureCanvas" width="300" height="150"></canvas>
      </div>
      <button class="btn btn-primary w-100" type="submit">âœ”ì œì¶œí•˜ê¸°</button>
      </div>
    </form>
    <br>
    <script>
      var canvas = document.getElementById('signatureCanvas');
      var ctx = canvas.getContext('2d');
      ctx.lineWidth = 2;
      var isDrawing = false;
           
      canvas.addEventListener('touchstart', startDrawing);
      canvas.addEventListener('touchmove', draw);
      canvas.addEventListener('touchend', stopDrawing);
      
      canvas.addEventListener('mousedown', function(event) {
      alert('ğŸ¤·â€â™€ï¸ëª¨ë°”ì¼ì—ì„œë§Œ ì„œëª…í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
       });
      
      function startDrawing(event) {
        isDrawing = true;
        var rect = canvas.getBoundingClientRect();
        var x = event.touches[0].clientX - rect.left;
        var y = event.touches[0].clientY - rect.top;
        ctx.beginPath();
        ctx.moveTo(x, y);
      }
      
      function draw(event) {
        event.preventDefault();
        if (!isDrawing) return;
        var rect = canvas.getBoundingClientRect();
        var x = event.touches[0].clientX - rect.left;
        var y = event.touches[0].clientY - rect.top;
        ctx.lineTo(x, y);
        ctx.stroke();
      }
      
      function stopDrawing() {
        isDrawing = false;
      }
      
      function clearSignature() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
      }

       // iOS(ì•„ì´í° ë“±) ì œìŠ¤ì²˜ ì´ë²¤íŠ¸ ì²˜ë¦¬
      canvas.addEventListener('gesturestart', function(event) {
      event.preventDefault();
      startDrawing(event);
      });

     canvas.addEventListener('gesturechange', function(event) {
     event.preventDefault();
    draw(event);
    });

    canvas.addEventListener('gestureend', function(event) {
    event.preventDefault();
    stopDrawing();
    });
    // ì—¬ê¸°ê¹Œì§€ ios ì œìŠ¤ì²˜ ì²˜ë¦¬ js ì¶”ê°€

      ctx.font = "15px Arial";  // í°íŠ¸ í¬ê¸°ì™€ ìŠ¤íƒ€ì¼ì„ ì„¤ì •í•©ë‹ˆë‹¤.
      ctx.fillText('ì„œëª…ì¼ì: ' + new Date().toLocaleDateString(), 5, 140);  // (10, 50) ìœ„ì¹˜ì— "ë¬¸êµ¬"ì‚½ì…
        </script>
       <script>
    $( function() {
      var availableTags = [
        "í™ê¸¸ë™",
        "ë°•ë¬¸ìˆ˜"
      ];
      $( "#names" ).autocomplete({
        source: availableTags
      });
    } );
    </script> 
      <script>
  $( function() {
    var availableTags = [
      "í•œêµ­ì‹ í˜‘",
      "ë¯¸êµ­ì‹ í˜‘"
    ];
    $( "#members" ).autocomplete({
      source: availableTags
    });
  } );
  </script>
  <script>
      function opendocu() {
        document.getElementById("open").style.display='none';
        document.getElementById("close").style.display='block';
        document.getElementById("docu").style.display='block';
        window.scrollTo(0, document.body.scrollHeight); 
      }
      function closedocu() {
        document.getElementById("open").style.display='block';
        document.getElementById("close").style.display='none';
        document.getElementById("docu").style.display='none';
      }
    </script>
        
      </body>
    </html>
